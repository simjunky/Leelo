<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Manual · Leelo.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">Leelo.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>Manual</a><ul class="internal"><li><a class="tocitem" href="#Installation"><span>Installation</span></a></li><li><a class="tocitem" href="#Run-the-Model"><span>Run the Model</span></a></li><li><a class="tocitem" href="#Custom-Scenarios"><span>Custom Scenarios</span></a></li><li><a class="tocitem" href="#Visualization"><span>Visualization</span></a></li></ul></li><li><a class="tocitem" href="../documentation/">Documentation</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Manual</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Manual</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/simjunky/Leelo/blob/master/docs/src/manual.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Manual"><a class="docs-heading-anchor" href="#Manual">Manual</a><a id="Manual-1"></a><a class="docs-heading-anchor-permalink" href="#Manual" title="Permalink"></a></h1><p>The following sections will guide you through the <a href="#Installation">Installation</a> process, how to <a href="#Run-the-Model">Run the Model</a>, how to create <a href="#Custom-Scenarios">Custom Scenarios</a> and about the built-in <a href="#Visualization">Visualization</a>.</p><h2 id="Installation"><a class="docs-heading-anchor" href="#Installation">Installation</a><a id="Installation-1"></a><a class="docs-heading-anchor-permalink" href="#Installation" title="Permalink"></a></h2><h3 id="Prerequisites"><a class="docs-heading-anchor" href="#Prerequisites">Prerequisites</a><a id="Prerequisites-1"></a><a class="docs-heading-anchor-permalink" href="#Prerequisites" title="Permalink"></a></h3><p>The <code>Leelo.jl</code> package uses <a href="https://github.com/jump-dev/JuMP.jl"><code>JuMP.jl</code></a> to build the mathematical model and IBM&#39;s CPLEX to solve said model&#39;s optimization problem. The CPLEX API is managed by the <a href="https://github.com/jump-dev/CPLEX.jl"><code>CPLEX.jl</code></a> package. While <a href="https://github.com/jump-dev/JuMP.jl"><code>JuMP.jl</code></a> is solver independent, i.e. any supported solver can be chosen, <a href="https://github.com/jump-dev/CPLEX.jl"><code>CPLEX.jl</code></a> requires IBM&#39;s CPLEX to be installed <strong>before</strong> installing it and adding it to the project.</p><p>To install <a href="https://www.ibm.com/products/ilog-cplex-optimization-studio">IBM® ILOG® CPLEX® Optimization Studio</a> follow the steps on their website. CPLEX is free for academia. After installation the <code>CPLEX_STUDIO_BINARIES</code> environment variable has to be set to the installation location, as shown below.</p><pre><code class="language-Julia hljs">ENV[&quot;CPLEX_STUDIO_BINARIES&quot;] = &quot;C:\\Program Files\\CPLEX_Studio1210\\cplex\\bin\\x86-64_win\\&quot;</code></pre><div class="admonition is-info"><header class="admonition-header">Info</header><div class="admonition-body"><p>Your path may differ, check your CPLEX installation directory.</p></div></div><h3 id="The-Leelo.jl-Package"><a class="docs-heading-anchor" href="#The-Leelo.jl-Package">The <code>Leelo.jl</code> Package</a><a id="The-Leelo.jl-Package-1"></a><a class="docs-heading-anchor-permalink" href="#The-Leelo.jl-Package" title="Permalink"></a></h3><p>The first step to using <code>Leelo.jl</code> is to get the package and it&#39;s dependencies installed. Since it is not registered in the Julia General Registry, it needs to be added as unregistered package. This is done by adding it via the specific github repository URL.</p><pre><code class="language-Julia hljs">using Pkg
Pkg.add(&quot;https://github.com/simjunky/Leelo&quot;)</code></pre><p>Alternatively, especially if you want to make modifications to the model&#39;s code, instead of just the computed scenarios, you can just use git to clone the github repository to your PC. When doing so, to then use the packages functions, you need to use <code>activate</code> to switch from the standard Julia environment to the packages one. In the <code>REPL</code> navigate to the cloned directory, then use:</p><pre><code class="language-Julia hljs">using Pkg
Pkg.activate(&quot;.&quot;)</code></pre><p>From here on out, no matter which method you chose, you should be able to use <code>Leelo.jl</code>&#39;s functions as usual via:</p><pre><code class="language-Julia hljs">using Leelo</code></pre><p>The following <a href="#Run-the-Model">Run the Model</a> section gives an overview on how to run a simulation model. The <a href="../documentation/#Documentation">Documentation</a> gives a detailed overview of all provided functions.</p><h2 id="Run-the-Model"><a class="docs-heading-anchor" href="#Run-the-Model">Run the Model</a><a id="Run-the-Model-1"></a><a class="docs-heading-anchor-permalink" href="#Run-the-Model" title="Permalink"></a></h2><p>The <a href="../documentation/#Leelo.run_sim"><code>run_sim</code></a> function is the main way to run a simulation. For each step of the simulation it automatically calls the associated functions:</p><ul><li>It reads the input files and creates a <a href="../documentation/#Leelo.ModelData"><code>ModelData</code></a> data structure, which holds all needed parameters.</li><li>For each benchmark year of the simulation, it:<ul><li>creates a new <code>JuMP.Model</code> and links it to the CPLEX optimizer.</li><li>adds model variables using <a href="https://github.com/jump-dev/JuMP.jl"><code>JuMP.jl</code></a>&#39;s <code>@variable</code> macro.</li><li>adds model constraints using <a href="https://github.com/jump-dev/JuMP.jl"><code>JuMP.jl</code></a>&#39;s <code>@constraint</code> macro.</li><li>defines the model&#39;s objective function.</li><li>calculates an optimal solution.</li><li>stores the results by writing them to a <code>HDF5</code> file.</li><li>transitions the model parameters to the next year</li></ul></li><li>After all benchmark years have been calculated it visualizes some predefined aspects of the result.</li></ul><p>To specify which scenario to run, the directory name <code>&lt;dir_name&gt;</code> containing all scenario related files can be passed to the <a href="../documentation/#Leelo.run_sim"><code>run_sim</code></a> function.</p><pre><code class="language-Julia hljs">run_sim(scenario_dir = &quot;&lt;dir_name&gt;&quot;)</code></pre><p>The <code>scenario_dir</code> argument defaults to the test directory, which may not be present at your current working directory.<br/>The <code>&lt;dir_name&gt;</code> directory must have the sub-directory <code>&lt;dir_name&gt;/input_data</code>, where all the input files must be located. Exemplary input files, which can be modified, can be cloned or downloaded from the package&#39;s <a href="https://github.com/simjunky/Leelo/tree/master/data">github</a>, with more info in <a href="#Custom-Scenarios">Custom Scenarios</a>.</p><p>The second optional argument of <a href="../documentation/#Leelo.run_sim"><code>run_sim</code></a> is <code>config</code>. It defaults to <code>SingleObjectiveBasicConfig</code>, which means the created model will only have the basic constraints. To add multi-service constrains, e.g. power reserves, to the model the <code>SingleObjectiveMultiServiceConfig</code> can be used.</p><pre><code class="language-Julia hljs">run_sim(config = SingleObjectiveMultiServiceConfig())</code></pre><p>The results are stored in a <code>HDF5</code> file in the <code>&lt;dir_name&gt;/output_data</code> sub-directory. To view the data, use <a href="https://www.hdfgroup.org/downloads/hdfview/">HDF®View</a>. The values of a benchmark years variables are stored in a sub-group within the <code>HDF5</code> file. <br/>To create your own data evaluation, the <a href="https://github.com/JuliaIO/HDF5.jl"><code>HDF5.jl</code></a> package can be used. To open the file use <code>h5open</code>, <code>[]</code> for specifiing the sub group  and <code>read</code> to access the data within the variables.</p><pre><code class="language-Julia hljs">using HDF5
file = h5open(&quot;&lt;file_dir&gt;/&lt;file_name&gt;.h5&quot;, &quot;r&quot;)
var = read(file[&quot;parameters&quot;], &quot;interest_rate&quot;)
close(file)</code></pre><p>Here, the variable <code>interest_rate</code> was read from the <code>parametes</code> sub-group and copied to the variable <code>var</code>. Always remember to close the file using <code>close</code>, when done.</p><h2 id="Custom-Scenarios"><a class="docs-heading-anchor" href="#Custom-Scenarios">Custom Scenarios</a><a id="Custom-Scenarios-1"></a><a class="docs-heading-anchor-permalink" href="#Custom-Scenarios" title="Permalink"></a></h2><p>The real use of <code>Leelo.jl</code> is to create your own energy system scenarios.</p><p>To do this use the exemplary input files from the package&#39;s <a href="https://github.com/simjunky/Leelo/tree/master/data">github</a> as a starting ground. These are the files:</p><ul><li><code>scenario_setting.xlsx</code> contains scenatio dimension such as number of nodes, timsteps and the years of the planning horizon.</li><li><code>demand_profiles.xlsx</code> contains the power demand for each timestep and node</li><li><code>transmission_lines.xlsx</code> contains the power lines connecting the nodes.</li><li><code>conventional_generators.xlsx</code> contains all fossil fuel dependent power generation technologies.</li><li><code>renewable_generators.xlsx</code> contains all renewable power generation technologies. They differ compared to the conventional generators by having an associated time dependent generation profile.</li><li><code>renewable_profiles.xlsx</code> contains these generation profiles for each renwable technology for each node and timestep.</li><li><code>hydro_run_of_river.xlsx</code> contains the different river-based hydro power plants. These also have generation profiles depending on water availability.</li><li><code>hydro_run_of_river_profiles.xlsx</code> contains these generation profiles for all river hydro power plants.</li><li><code>hydro_cascades.xlsx</code> contain all reservoir-based hydro power plants and their interconnectivity. They depend on inflow profiles to their reservoirs.</li><li><code>hydro_cascades_profiles.xlsx</code> contains the inflow profiles for hydro power reservoirs.</li><li><code>storage_technologies.xlsx</code> contains the different available storages and their storage medium.</li><li><code>conversion_technologies.xlsx</code> contains the available converters to store and recuperate power. With the help of these, more complex technologies, such as concentrated solar power can be modeled.</li><li><code>CSP_profiles.clsx</code> contains the generation profiles for concentrated solar power plants.</li><li><code>preexisting_capacities.xlsx</code> contains the already existing power capacity of each technology in each bus.</li></ul><p>Each file contains parameters or generation profiles for the possible technologies. To add a certain technology, simply add a row to the respective file and  fill out all cells of the table. Keep in mind that there needs to be an empty row after the last entry. <br/>For some technologies, such as in <code>conventional_generators.xlsx</code> no further information is needed. For others, that depend on some generation profile, such as <code>renewable_generators.xlsx</code>, also data must be added in the connected <code>renewable_profiles.xlsx</code> file. All technologies require some power capacity to be added to <code>preexisting_capacities.xlsx</code> (it ca be zero).</p><p>To use your now generated scenario files, put them all into the <code>&lt;dir_name&gt;/input_data</code> sub directory of your scenario directory.</p><h2 id="Visualization"><a class="docs-heading-anchor" href="#Visualization">Visualization</a><a id="Visualization-1"></a><a class="docs-heading-anchor-permalink" href="#Visualization" title="Permalink"></a></h2><p>The <a href="../documentation/#Leelo.create_plots"><code>create_plots</code></a> function runs all defined visualization functions. Its optional arguments are the scenario directory, and the filename of the <code>HDF5</code> for the case it deviates from the default <code>model_results.h5</code>. This file must be in the <code>&lt;dir_name&gt;/output_data</code> sub-directory to be found.</p><pre><code class="language-Julia hljs">create_plots(scenario_dir = &quot;&lt;dir_name&gt;&quot;, file_name = &quot;&lt;file_name&gt;.h5&quot;)</code></pre><p>All the created plots are saved as <code>PDF</code> file in the <code>&lt;dir_name&gt;/plots</code> sub-directory.</p><p>If only one specific plot is of interest, then instead of the <a href="../documentation/#Leelo.create_plots"><code>create_plots</code></a> function, all visualization functions can be called directly. All of them are listed in the <a href="../documentation/#Documentation">Documentation</a> and are named with a <code>plot_</code>-prefix by convention. <br/>These functions require an opened <code>HDF5</code> file and the plot target directory as arguments. Therefore, the <code>HDF5</code> result file needs to be opened first to call these functions. This is done using the <a href="https://github.com/JuliaIO/HDF5.jl"><code>HDF5.jl</code></a> package.</p><pre><code class="language-Julia hljs">using HDF5

# &quot;r&quot; opens the file in read-only mode
file = h5open(&quot;&lt;dir_name&gt;/output_data/&lt;file_name&gt;.h5&quot;, &quot;r&quot;)

target_dir = &quot;&lt;dir_name&gt;/plots&quot;

# e.g. if you are interested in the total system cost
plot_total_cost(file, target_dir)

close(file)</code></pre><p>It should be noted, that after opening the file using <code>h5open</code> it should always be closed using <code>close</code>.</p><div class="admonition is-info"><header class="admonition-header">Info</header><div class="admonition-body"><p>Due to the large ammount of variables, parameters and possible interesting combinations thereof, it can be, that you have to create a plotting function yourself. <br/>Please feel free to add it to <code>Leelo.jl</code> and the <a href="../documentation/#Leelo.create_plots"><code>create_plots</code></a> function. Reference to the existing functions as a style guide.</p></div></div></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><a class="docs-footer-nextpage" href="../documentation/">Documentation »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.22 on <span class="colophon-date" title="Thursday 15 September 2022 02:56">Thursday 15 September 2022</span>. Using Julia version 1.6.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
